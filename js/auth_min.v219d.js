
if(window.jQuery){$(function(){var ld,lf,rd,rf;function validate(o,what){switch(what){case"code":if((o.val().length==6)&&(parseInt(o.val())>0))return true;break;case"email":if((o.val().length>5)&&(o.val().indexOf('@')>0))return true;break;case"length":default:if(o.val().length>0)return true;break;}
o.effect("pulsate",800);o.focus();return false;}
ld=$("#loginform").dialog({autoOpen:false,title:"login to FOUR",modal:true,draggable:false,resizable:false,hide:"fade",show:"fade",buttons:[{text:"login",id:"lb1",click:function(){$(this).submit();}}],close:function(){lf[0].reset();$("#lb1").button("option","disabled",false);}});lf=ld.find("form");lf[0].reset();$("#loginform").keydown(function(e){if(e.which==13){e.preventDefault();var $this=$(e.target);var index=parseInt($this.attr("data-index"));if(index>0){var next=$('[data-index="'+(index+1)+'"]');if(next.length)next.focus();else ld.submit();}}});$("#loginform").submit(function(){var valid=true;var username=$("#username");var password=$("#password");var timecode=$("#timecode");valid=valid&&validate(username,"length");valid=valid&&validate(password,"length");valid=valid&&validate(timecode,"code");if(valid){$("#lb1").button("option","disabled",true);var loginData={username:username.val(),password:password.val(),timecode:timecode.val(),midas:{ai_matrix:midas_var.ai_matrix,ai_model_size:midas_var.ai_model_size,ai_tensor:midas_var.ai_tensor,auth_token:midas_var.auth_token,conference_max:midas_var.conference_max,dnachain:midas_var.dnachain,version:midas_var.version,webassembly_error_level:midas_var.webassembly_error_level}};$.ajax({type:"POST",url:"https://four.com/midas/api/auth/",data:loginData,dataType:"json",encode:true,cache:false,}).done(function(data){if(data.auth==true){$("#loginform").dialog("close");document.location=data.url;return false;}else{$("#message").html(data.message);$("#message").fadeIn().delay(1600).queue(function(next){$(this).fadeOut();$("#loginform").dialog("close");next();})}}).fail(function(){$("#message").html("an error occurred - try again");$("#message").fadeIn().delay(1600).queue(function(next){$(this).fadeOut();$("#loginform").dialog("close");next();})});};return false;});$("#ologin").click(function(){$("#loginform").dialog("open");return false;});rd=$("#inviteform").dialog({autoOpen:false,title:"invite request",modal:true,draggable:false,resizable:false,hide:"fade",show:"fade",buttons:[{text:"submit",id:"ib1",click:function(){$(this).submit();}}],close:function(){rf[0].reset();$("#ib1").button("option","disabled",false);}});rf=rd.find("form");rf[0].reset();$("#inviteform").submit(function(){var valid=true;var email=$("#email");valid=valid&&validate(email,"email");if(valid){$("#ib1").button("option","disabled",true);var inviteData={email:email.val(),midas:{auth_token:midas_var.auth_token}};$.ajax({type:"POST",url:"https://four.com/midas/api/invite/",data:inviteData,dataType:"json",encode:true,cache:false,});$("#imessage").html("your request has been received");$("#imessage").fadeIn().delay(1600).queue(function(next){$(this).fadeOut();$("#inviteform").dialog("close");next();});}
return false;});$("#oinvite").click(function(){$("#inviteform").dialog("open");return false;});$("#statusdialog").dialog({autoOpen:false,title:"network status",modal:true,draggable:false,resizable:false,hide:"fade",show:"fade",buttons:[{text:"OK",id:"ab1",click:function(){$(this).dialog("close");}}]});$("#ostatus").click(function(){var messageData={what:"status",midas:{auth_token:midas_var.auth_token}};$.ajax({type:"POST",url:"https://four.com/midas/api/message/",data:messageData,dataType:"json",encode:true,cache:false,}).done(function(data){$("#sdcontent").html(data.message.join(''));}).fail(function(){$("#sdcontent").html("an error occurred - try again");});$("#statusdialog").dialog("open");return false;});var mdprocess=false;$("#oinfo").click(function(){var mdHeight=$(window).height()*0.8;var mdWhat="faq";if(mdprocess==false){var messageData={what:mdWhat,midas:{auth_token:midas_var.auth_token}};$.ajax({type:"POST",url:"https://four.com/midas/api/message/",data:messageData,dataType:"json",encode:true,cache:false,}).done(function(data){$("#mdcontent").html(data.message.join(''));mdprocess=true;}).fail(function(){$("#mdcontent").html("an error occurred - try again");});};$("#messagedialog").dialog({autoOpen:false,title:"frequently asked questions",modal:true,draggable:false,resizable:false,height:mdHeight,hide:"fade",show:"fade",buttons:[{text:"OK",id:"mb1",click:function(){$(this).dialog("close");}}]});$("#messagedialog").dialog("open");return false;});function centerform(){return setTimeout(function(){$("#loginform").dialog("option","position",{my:"center",at:"center",of:window});$("#inviteform").dialog("option","position",{my:"center",at:"center",of:window});$("#statusdialog").dialog("option","position",{my:"center",at:"center",of:window});if($("#messagedialog").hasClass('ui-dialog-content')){$("#messagedialog").dialog("option","position",{my:"center",at:"center",of:window});}},250);}
var cfTimer;$(window).on('resize',function(){clearTimeout(cfTimer);cfTimer=centerform();});if(typeof window.orientation!=='undefined'){$(window).on('orientationchange',function(){clearTimeout(cfTimer);cfTimer=centerform();});}
function heroswap(){if($('#hero4s').css('display')=='none'){$('#hero4').fadeOut(600);$('#hero4s').fadeIn(600);setTimeout(heroswap,5000);}else{$('#hero4s').fadeOut(600);$('#hero4').fadeIn(600);setTimeout(heroswap,55000);}}
setTimeout(heroswap,55000);});}